---
description: Comprehensive guidelines for new developers to quickly onboard the CodeFast project - a UI components library built with React 19, TypeScript, and Tailwind CSS 4
globs: ["**/*.ts", "**/*.tsx", "**/*.js", "**/*.jsx", "**/*.json", "**/*.mjs", "**/*.cjs"]
alwaysApply: true
---

# CodeFast - Project Onboarding Guide for New Developers

## ğŸ“‹ Project Overview

CodeFast is a UI components library built with **TypeScript**, **React 19**, and **Tailwind CSS 4**. All components are designed based on **Radix UI** standards to ensure performance, scalability, and ease of customization.

### Project Objectives
- **Reusability**: Provide versatile UI components that can be used across multiple projects
- **Flexible Customization**: Utilize **Tailwind Variants** to easily override or extend default styles
- **High Performance**: Optimized to improve loading speed and minimize unnecessary resources
- **Clear Codebase**: Modern structure that is easy to read and maintain

## ğŸ—ï¸ Monorepo Structure

The project uses **pnpm workspaces** and **Turbo** to manage the monorepo:

```
codefast/
â”œâ”€â”€ apps/                    # Demo and test applications
â”‚   â”œâ”€â”€ next/               # Next.js 16 app (React 19)
â”‚   â””â”€â”€ start/              # TanStack Start app (Vite + React Router)
â”œâ”€â”€ packages/               # Main packages
â”‚   â”œâ”€â”€ ui/                 # UI components library (main package)
â”‚   â”œâ”€â”€ tailwind-variants/  # Tailwind CSS variants utilities
â”‚   â”œâ”€â”€ eslint-config/      # Shared ESLint configuration
â”‚   â”œâ”€â”€ typescript-config/  # Shared TypeScript configuration
â”‚   â””â”€â”€ image-loader/       # Image loading utilities
â””â”€â”€ benchmarks/             # Performance benchmarks
```

### Main Package: `@codefast/ui`
- **Location**: `packages/ui/`
- **Description**: Main UI components library
- **Exports**: Components, hooks, primitives
- **Dependencies**: Radix UI, Tailwind CSS, React Hook Form, Zod

## ğŸ› ï¸ Tech Stack

### Core Technologies
- **React**: 19.2.0 (with React Compiler)
- **TypeScript**: 5.9.3
- **Next.js**: 16.0.3 (for app/next)
- **TanStack Start**: 1.132.0 (for app/start)
- **Tailwind CSS**: 4.x
- **Radix UI**: 1.x (primitives)

### Build Tools
- **pnpm**: 10.20.0 (package manager)
- **Turbo**: 2.6.1 (build system)
- **rslib**: 0.17.2 (library bundler)
- **Vite**: 7.1.7 (for app/start)

### Development Tools
- **ESLint**: 9.39.1 (with custom config)
- **Prettier**: 3.6.2 (with Tailwind plugin)
- **Jest**: 30.2.0 (testing)
- **Vitest**: 4.0.9 (for app/start)

## ğŸ“š Using Context7 for Documentation

When working with external libraries, use Context7 to access up-to-date documentation:

- **React**: Use `/websites/react_dev` or `/reactjs/react.dev` for React 19 documentation
- **Next.js**: Use `/vercel/next.js` or `/websites/nextjs` for Next.js 16 documentation
- **Tailwind CSS**: Use `/websites/tailwindcss` for Tailwind CSS 4 documentation
- **Radix UI**: Use `/radix-ui/primitives` or `/websites/radix-ui` for Radix UI primitives

Always consult Context7 documentation when:
- Implementing new features with these libraries
- Encountering API changes or deprecations
- Need examples and best practices
- Understanding breaking changes between versions

## ğŸ“¦ Dependency Management

### Workspace Protocol
The project uses `workspace:*` to link internal packages:
```json
{
  "dependencies": {
    "@codefast/ui": "workspace:*",
    "@codefast/tailwind-variants": "workspace:*"
  }
}
```

### Installing Dependencies
```bash
# Install all dependencies
pnpm install

# Install dependency for a specific package
pnpm --filter @codefast/ui add <package-name>
```

## ğŸš€ Development Workflow

### Starting the Project
```bash
# Run all apps and packages in dev mode
pnpm dev

# Run a specific app only
pnpm --filter @apps/next dev
pnpm --filter @apps/start dev

# Build all packages
pnpm build:packages

# Build a specific package
pnpm --filter @codefast/ui build
```

### Important Scripts
```bash
# Development
pnpm dev              # Run dev mode for all
pnpm build            # Build all
pnpm lint             # Lint all
pnpm lint:fix         # Fix linting errors
pnpm format           # Format code with Prettier
pnpm test             # Run tests
pnpm test:watch       # Run tests in watch mode

# Dependencies
pnpm deps:install     # Install dependencies
pnpm deps:outdated    # Check outdated packages
pnpm deps:upgrade     # Upgrade packages interactively

# Cleanup
pnpm clean            # Remove build outputs
pnpm clean:cache      # Clean cache and prune store
pnpm clean:modules    # Remove node_modules
```

## ğŸ“ Code Conventions

### TypeScript
- Use **strict mode** in TypeScript
- Export types separately from components
- Prefer `type` over `interface` when possible
- Component props should extend HTML attributes when appropriate

### Component Structure
Each component in `packages/ui/src/components/` follows this structure:

**For components with variants:**
```tsx
import type { ComponentProps, JSX } from "react";
import type { VariantProps } from "@codefast/tailwind-variants";

import { tv } from "@codefast/tailwind-variants";

/* -----------------------------------------------------------------------------
 * Variant: ComponentName
 * -------------------------------------------------------------------------- */

const componentVariants = tv({
  base: "base-classes-here",
  variants: {
    size: {
      sm: "small-classes",
      md: "medium-classes",
      lg: "large-classes",
    },
    variant: {
      default: "default-classes",
      outline: "outline-classes",
    },
  },
  defaultVariants: {
    size: "md",
    variant: "default",
  },
});

/* -----------------------------------------------------------------------------
 * Component: ComponentName
 * -------------------------------------------------------------------------- */

type ComponentNameProps = ComponentProps<"div"> &
  VariantProps<typeof componentVariants>;

function ComponentName({
  className,
  size,
  variant,
  ...props
}: ComponentNameProps): JSX.Element {
  return (
    <div
      className={componentVariants({ className, size, variant })}
      data-slot="component-name"
      {...props}
    />
  );
}

/* -----------------------------------------------------------------------------
 * Exports
 * -------------------------------------------------------------------------- */

export { componentVariants };
export { ComponentName };
export type { ComponentNameProps };
```

**For simple components without variants:**
```tsx
import type { ComponentProps, JSX } from "react";

import { cn } from "@codefast/tailwind-variants";

/* -----------------------------------------------------------------------------
 * Component: SimpleComponent
 * -------------------------------------------------------------------------- */

type SimpleComponentProps = ComponentProps<"div">;

function SimpleComponent({
  className,
  ...props
}: SimpleComponentProps): JSX.Element {
  return (
    <div
      className={cn("base-classes-here", className)}
      data-slot="simple-component"
      {...props}
    />
  );
}

/* -----------------------------------------------------------------------------
 * Exports
 * -------------------------------------------------------------------------- */

export { SimpleComponent };
export type { SimpleComponentProps };
```

### Styling with Tailwind Variants
- Use `@codefast/tailwind-variants` to create variants
- Pattern: `tv({ base, variants, defaultVariants })`
- Always export variants so they can be overridden externally
- Use `className` prop to merge additional classes

### File Naming
- Components: `kebab-case.tsx` (e.g., `button.tsx`, `input-group.tsx`)
- Hooks: `use-kebab-case.ts` (e.g., `use-is-mobile.ts`)
- Types: Export in the same file as the component

### Export Pattern
- Export components and types from `src/index.ts`
- Use path aliases: `@/components/*`, `@/hooks/*`
- Export variants if necessary

## ğŸ§ª Testing

### Test Structure
- Tests are located in `tests/` directory
- Use Jest with `@testing-library/react`
- Test files: `*.test.ts` or `*.test.tsx`

### Running Tests
```bash
# Run all tests
pnpm test

# Watch mode
pnpm test:watch

# Coverage
pnpm test:coverage
```

## ğŸ¨ Styling Guidelines

### Tailwind CSS 4
- Use Tailwind CSS 4 with PostCSS
- Custom utilities in `packages/ui/src/css/`
- Use CSS variables for theming

### Component Styling
- Base styles in `base` of `tv()`
- Variants for different states
- Default variants for default values
- Support dark mode with `dark:` prefix

### Responsive Design
- Mobile-first approach
- Use hooks: `useIsMobile`, `useMediaQuery`
- Breakpoints follow Tailwind defaults

## ğŸ“š Package: @codefast/ui

### Component Categories
1. **Form Components**: Input, Select, Checkbox, Radio, Form, etc.
2. **Layout Components**: Card, Separator, AspectRatio, etc.
3. **Overlay Components**: Dialog, Popover, Tooltip, Sheet, etc.
4. **Navigation**: Breadcrumb, Pagination, NavigationMenu, etc.
5. **Feedback**: Alert, Toast (Sonner), Progress, Spinner, etc.
6. **Data Display**: Table, Chart, Avatar, Badge, etc.

### Available Hooks
- `useAnimatedValue` - Animation utilities
- `useCopyToClipboard` - Clipboard functionality
- `useIsMobile` - Mobile detection
- `useMediaQuery` - Media query hook
- `useMutationObserver` - DOM mutation observer
- `usePagination` - Pagination logic

### Primitives
- Radix UI primitives are wrapped and exported from `primitives/`
- Use when custom implementation is needed

## ğŸ”§ Configuration Files

### ESLint
- Root: `packages/eslint-config/`
- Apps can override with their own config
- Uses `@tanstack/eslint-config` for app/start

### TypeScript
- Base config: `packages/typescript-config/base.json`
- React config: `packages/typescript-config/react.json`
- Next.js config: `packages/typescript-config/next.json`

### Prettier
- Config: `prettier.config.js` at root
- Plugins: `prettier-plugin-tailwindcss`, `prettier-plugin-packagejson`
- Format on save is recommended

### Commit Messages
- Use **Conventional Commits**
- Format: `type(scope): subject`
- Types: `feat`, `fix`, `docs`, `style`, `refactor`, `test`, `chore`
- Enforced by `commitlint`

## ğŸ› Debugging

### Common Issues

1. **Build errors**: Run `pnpm build:packages` before dev
2. **Type errors**: Run `pnpm check-types` to check
3. **Lint errors**: Run `pnpm lint:fix` to auto-fix
4. **Dependency issues**: Run `pnpm deps:reinstall` to reinstall

### Development Tips
- Use `pnpm --filter` to run commands for specific packages
- Turbo cache helps build faster
- Watch mode automatically rebuilds on changes

## ğŸ“– Reference Documentation

### External Documentation
- [Radix UI](https://www.radix-ui.com/primitives) - UI Primitives
- [Tailwind CSS](https://tailwindcss.com/docs) - Utility-first CSS
- [React 19](https://react.dev) - React documentation
- [Next.js 16](https://nextjs.org/docs) - Next.js documentation
- [TanStack Start](https://tanstack.com/start) - Full-stack framework

### Internal Documentation
- README.md in each package
- CHANGELOG.md for version history
- RFC.md in `packages/tailwind-variants/` for design decisions

## ğŸ¯ Best Practices

### When Adding a New Component
1. Create file in `packages/ui/src/components/`
2. Use `tv()` to define variants
3. Export component and types from `src/index.ts`
4. Write tests in `tests/`
5. Update documentation if needed

### When Modifying a Component
1. Maintain backward compatibility when possible
2. Update types if props change
3. Run tests to ensure nothing breaks
4. Update CHANGELOG.md if it's a breaking change

### When Working with Monorepo
1. Always build packages before testing in apps
2. Use `workspace:*` for internal dependencies
3. Run `pnpm check-types` before committing
4. Ensure linting and formatting pass

## ğŸš¨ Important Notes

- **Node version**: >= 20.0.0 (check with `node --version`)
- **pnpm version**: 10.20.0 (check with `pnpm --version`)
- **React 19**: Some patterns may differ from React 18
- **Tailwind CSS 4**: Has some breaking changes from v3
- **TypeScript strict**: All packages use strict mode

## ğŸ’¡ Quick Start Checklist

For new developers:

1. âœ… Clone repository
2. âœ… Install Node.js >= 20 and pnpm 10.20.0
3. âœ… Run `pnpm install`
4. âœ… Run `pnpm build:packages` to build all packages
5. âœ… Run `pnpm dev` to start dev servers
6. âœ… Open `http://localhost:3000` (Next.js) or `http://localhost:3001` (Start)
7. âœ… Read README.md of the package you're working on
8. âœ… Check examples in `apps/` to understand component usage

## ğŸ”— Useful Commands Reference

```bash
# Package management
pnpm install                    # Install all dependencies
pnpm --filter <package> add <pkg>  # Add dependency to specific package

# Development
pnpm dev                        # Start all dev servers
pnpm --filter @apps/next dev    # Start specific app
pnpm --filter @codefast/ui dev  # Watch mode for package

# Building
pnpm build                      # Build everything
pnpm build:packages             # Build only packages
pnpm --filter @codefast/ui build  # Build specific package

# Quality checks
pnpm lint                       # Lint all
pnpm lint:fix                   # Fix linting
pnpm format                     # Format code
pnpm check-types                # Type check
pnpm test                       # Run tests

# Cleanup
pnpm clean                      # Clean build outputs
pnpm clean:cache                # Clean cache
pnpm clean:modules              # Remove node_modules
```

---

**Note**: This file was created to help new developers quickly onboard the project. If you have questions, please refer to the documentation or ask the team lead.
